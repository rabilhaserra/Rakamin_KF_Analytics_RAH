START
  1. AMBIL data ID cabang, Nama cabang, Kota, dan Provinsi.
  2. HITUNG rata-rata (AVG) dari rating fasilitas cabang.
  3. HITUNG rata-rata (AVG) dari rating kepuasan transaksi pelanggan.
  4. KELOMPOKKAN semua data tersebut berdasarkan identitas unik cabangnya (branch_id).
  5. URUTKAN secara bertingkat:
     - Prioritas 1: Rating Cabang paling TINGGI (untuk melihat fasilitas terbaik).
     - Prioritas 2: Rating Transaksi paling RENDAH (untuk melihat pelayanan terburuk).
  6. TAMPILKAN hanya 5 baris pertama sebagai hasil observasi.
END

SELECT 
    branch_id,
    branch_name,
    kota,
    provinsi,
    AVG(rating_cabang) AS avg_rating_cabang,
    AVG(rating_transaksi) AS avg_rating_transaksi
FROM `kimia_farma.tabel_analisa`
GROUP BY 1, 2, 3, 4
ORDER BY avg_rating_cabang DESC, avg_rating_transaksi ASC
LIMIT 5;
